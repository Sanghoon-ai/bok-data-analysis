name: Update CSV Files

on:
  push: # 저장소에 Push가 발생할 때 실행
    branches:
      - main
  schedule: # 매일 12:00 (UTC)에 실행
    - cron: "0 12 * * *"

jobs:
  run-script:
    runs-on: ubuntu-latest

    steps:
      # 저장소 체크아웃
      - name: Checkout repository
        uses: actions/checkout@v3

      # Python 설치
      - name: Set up Python
        uses: actions/setup-python@v3
        with:
          python-version: 3.9

      # 필요한 패키지 설치
      - name: Install dependencies
        run: |
          pip install pandas requests

      # Python 스크립트 실행
      - name: Run Python script
        run: |
          python script.py

      # 변경된 CSV 파일 커밋 및 푸시
      - name: Commit and push changes
        run: |
          git config --global user.name "GitHub Actions Bot"
          git config --global user.email "actions@github.com"
          git add *.csv
          git commit -m "Update CSV files"
          git push
